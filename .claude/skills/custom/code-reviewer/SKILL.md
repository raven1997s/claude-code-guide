---
name: code-reviewer
description: 审查代码质量、安全性和最佳实践。用于 PR 审查、代码检查或用户要求"审查代码"时。
allowed-tools: Read, Grep, Glob, Bash
---

# 代码审查 Skill

当用户请求代码审查时，按照以下流程进行：

## 审查流程

### 1. 理解上下文
- 首先阅读用户指定的文件或改动
- 理解代码的目的和功能
- 检查相关的依赖和调用关系

### 2. 质量检查
- **代码风格**：命名约定、代码格式、一致性
- **代码结构**：模块化、函数长度、复杂度
- **重复代码**：识别可提取的重复逻辑
- **注释文档**：必要的注释和文档字符串

### 3. 安全性检查
- **输入验证**：用户输入是否正确验证
- **敏感数据**：硬编码密钥、密码、token
- **注入攻击**：SQL 注入、命令注入、XSS
- **权限检查**：适当的访问控制

### 4. 最佳实践
- **错误处理**：异常捕获和错误传播
- **资源管理**：文件、连接、内存的正确关闭
- **性能考虑**：明显的性能问题
- **测试覆盖**：是否有足够的测试

### 5. 语言特定
- **Python**：PEP 8、类型注解、虚拟环境
- **JavaScript/TS**：ESLint、async/await、类型安全
- **Go**：错误处理、goroutine、context

## 输出格式

```markdown
## 代码审查报告

### 📊 总体评估
[评分：优秀/良好/需改进/不合格]
[简要总结]

### ✅ 优点
- [发现的优点1]
- [发现的优点2]

### ⚠️ 需要改进
#### 代码质量
- [问题1] ([文件:行](file.py#L10))
  - 原因：[为什么是问题]
  - 建议：[如何改进]

#### 安全性
- [安全问题] ([文件:行](file.py#L50))
  - 风险：[潜在风险]
  - 修复：[安全修复方案]

### 💡 建议优化
- [优化建议1]
- [优化建议2]

### 📝 其他说明
- [其他重要信息]
```

## 重要提示

- **建设性**：评论应具体、可操作、友善
- **优先级**：标注问题严重程度（高/中/低）
- **示例**：提供改进后的代码示例
- **解释**：说明为什么需要改进
- **确认**：对于风格问题，尊重团队约定
